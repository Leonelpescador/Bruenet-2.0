{% extends 'base.html' %}

{% block content %}


<div class="container mt-5">
    <h1>Consulta de Caja</h1>
    <h3>Caja abierta por: {{ caja.usuario.username }}</h3>
    <p>Apertura: {{ caja.apertura|date:"d/m/Y H:i" }}</p>
    {% if caja.cierre %}
        <p>Cierre: {{ caja.cierre|date:"d/m/Y H:i" }}</p>
    {% endif %}

    <h4>Transacciones:</h4>
    <ul>
        {% for transaccion in transacciones %}
            <li>{{ transaccion.tipo }} - ${{ transaccion.monto }} - {{ transaccion.descripcion }} ({{ transaccion.fecha|date:"d/m/Y H:i" }})</li>
        {% endfor %}
    </ul>

    <h4>Total Ingresado: ${{ monto_total }}</h4>
    <h4>Pagos:</h4>
    <ul>
        {% for pago in pagos %}
            <li>Pago de Pedido ID {{ pago.pedido.id }} - Monto: ${{ pago.monto }} - MÃ©todo: {{ pago.metodo_pago }}</li>
        {% endfor %}
    </ul>

    
    <a href="{% url 'home' %}" class="btn btn-primary mt-3">Volver a Inicio</a>
    <a href="{% url 'pedidos_activos' %}" class="btn btn-secondary mt-3">Ir a Pedidos Activos</a>
</div>
{% endblock %}
